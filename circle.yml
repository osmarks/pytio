machine:
  post:
    - if [[ $(pyenv versions | grep 3.6.3) -eq "" ]] ; then pyenv install 3.6.3 ; fi
dependencies:
  cache_directories:
    - "/opt/circleci/.pyenv/"
    - "~/virtualenvs"
    - "~/.cache/pip"
  override:
    - pyenv local 3.6.3
    - pip3 install flake8 --upgrade
    - pip3 install -r requirements.txt --upgrade
test:
  override:
      - flake8 .
      - python3 -m unittest -v test_tio